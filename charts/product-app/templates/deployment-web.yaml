apiVersion: apps/v1 kind: Deployment metadata: name: {{ include "product-app.fullname" . }}-web labels: app.kubernetes.io/name: {{ include "product-app.name" . }} app.kubernetes.io/instance: {{ .Release.Name }} spec: replicas: {{ .Values.replicaCount.web }} selector: matchLabels: app: web release: {{ .Release.Name }} template: metadata: labels: app: web release: {{ .Release.Name }} spec: containers: - name: web image: "{{ .Values.image.web.repository }}:{{ .Values.image.web.tag }}" imagePullPolicy: {{ .Values.image.web.pullPolicy }} ports: - containerPort: {{ .Values.service.web.port }} env: - name: VITE_API_URL value: "{{ .Values.env.API_BASE_URL | default (printf "https://%s/api" .Values.ingress.host) }}" readinessProbe: httpGet: path: / port: {{ .Values.service.web.port }} initialDelaySeconds: 5 periodSeconds: 10 resources: {{ toYaml .Values.resources.web | nindent 12 }}
