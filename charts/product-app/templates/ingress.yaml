{{- if .Values.ingress.enabled }} apiVersion: networking.k8s.io/v1 kind: Ingress metadata: name: {{ include "product-app.fullname" . }}-ingress annotations: {{ toYaml .Values.ingress.annotations | indent 4 }} spec: ingressClassName: {{ .Values.ingress.className | quote }} tls: - hosts: - {{ .Values.ingress.host | quote }} secretName: {{ .Values.ingress.tls.secretName }} rules: - host: {{ .Values.ingress.host | quote }} http: paths: - path: /api pathType: Prefix backend: service: name: {{ include "product-app.fullname" . }}-api port: number: {{ .Values.service.api.port }} - path: / pathType: Prefix backend: service: name: {{ include "product-app.fullname" . }}-web port: number: {{ .Values.service.web.port }} {{- end }}
